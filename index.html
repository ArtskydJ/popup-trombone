<style>
    body {
        background: url('bg.gif');
        background-size: 100px;
        overflow: hidden;
        height: 100%;
    }
    #outer {
        position: relative;
        height: 96px;
        min-width: 304px;
        margin: 50px;
    }
    #top {
        position: absolute;
        top: 0;
        left: 0;
    }
    #slide {
        position: absolute;
        bottom: 0;
        right: 0;
    }
    #expander {
        position: absolute;
        bottom: 0;
        left: 162px;
        width: calc(100% - 182px);
        height: 46px;
    }
    .note {
        position: absolute;
        top: 22px;
        left: 203px;
        z-index: -1;
    }
</style>
<script>
    var audioCtx,
        oscillatorNode,
        gainNode,
    
        outer,
        startingWidth,
        startingHeight,
    
        timeout,

        lastNoteTime = 0,
        notes = [];
    
    function onResize(event) {
        var width = window.innerWidth,
            t = performance.now(),
            x;

        if (width < startingWidth) setStarting();

        x = (width - startingWidth) / 50;

        if (!oscillatorNode) return;

        oscillatorNode.detune.value = (1-x) * 100 - 2400;
        gainNode.gain.value = .5;

        //gainOutNode.gain.setValueAtTime(gainOutNode.gain.value, audioCtx.currentTime);
        gainNode.gain.linearRampToValueAtTime(.5, audioCtx.currentTime + .1);

        outer.style.transform = 'rotate('+((Math.random()-.5)/width*1000)+'deg)';

        if (t - lastNoteTime > 200) {
            lastNoteTime = t;
            addNote();
        }

        clearTimeout(timeout);
        timeout = setTimeout(function () {
            gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + .1);
        }, 200);
    }

    function setStarting() {
        var margin;

        startingWidth = window.innerWidth;
        startingHeight = window.innerHeight;
        margin = (startingWidth - 304) / 2;

        outer.style.marginLeft = margin;
        outer.style.marginRight = margin;
    }

    function audioSetup() {
        if (audioCtx) return;

        audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        oscillatorNode = audioCtx.createOscillator();
        oscillatorNode.type = 'sawtooth';
        oscillatorNode.frequency.value = 440;
        oscillatorNode.start(0);

        gainNode = audioCtx.createGain();
        gainNode.gain.value = 0;

        oscillatorNode.connect(gainNode);
        gainNode.connect(audioCtx.destination);
    }

    function addNote() {
        var element = document.createElement('img'),
            note = {
                x: 203,
                y: 22,
                xv: Math.random()*5+5,
                yv: Math.random()*4-2,
                element: element
            };

        element.src = 'note.gif';
        element.className = 'note';
        outer.appendChild(element);

        notes.push(note);
    }

    function moveNotes() {
        var newNotes = [];

        notes.forEach(function (note) {
            note.yv -= .2;

            note.x += note.xv;
            note.y += note.yv;

            if (note.y > -100) newNotes.push(note);

            note.element.style.top = note.y;
            note.element.style.left = note.x;
        });

        notes = newNotes;

        setTimeout(moveNotes, 50);
    }

    window.addEventListener('load', function () {
        outer = document.getElementById('outer');
        setStarting();

        document.body.addEventListener('click', audioSetup);

        window.addEventListener('resize', onResize);

        moveNotes();
    });
</script>
<div id="outer">
    <img id="top" src="top.png" />
    <img id="expander" src="expander.png" />
    <img id="slide" src="slide.png" />
</div>
